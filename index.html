<!-- index.html -->
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>VINFAST TRƯƠNG THÀNH KIÊN GIANG - LINK HUB</title>
  <style>
    .script-embed-error {
    display: none !important;
    visibility: hidden !important;
  }
    :root{--accent:#0ea5a4;--bg:#f7fafc;--card:#ffffff}
    body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial;background:var(--bg);color:#0f172a}
    .wrap{display:flex;min-height:100vh}
    .sidebar{width:320px;background:linear-gradient(180deg,#ffffff, #f1f5f9);border-right:1px solid #e6edf3;padding:18px;box-sizing:border-box}
    .brand{font-weight:700;font-size:18px;margin-bottom:12px;color:var(--accent)}
    .search{display:flex;gap:8px;margin-bottom:12px}
    .search input{flex:1;padding:8px;border:1px solid #d1e2e8;border-radius:8px}
    .list{overflow:auto;max-height:calc(100vh - 170px);padding-right:6px}
    .item{padding:10px;border-radius:8px;margin-bottom:8px;background:var(--card);box-shadow:0 1px 2px rgba(15,23,42,0.04);cursor:pointer;border:1px solid transparent}
    .item:hover{border-color:#e6f6f5}
    .item .title{font-weight:600}
    .item .desc{font-size:12px;color:#475569;margin-top:4px}
    .main{flex:1;padding:12px;box-sizing:border-box;display:flex;flex-direction:column}
    .controls{display:flex;align-items:center;gap:8px;margin-bottom:8px}
    .frameWrap{flex:1;border-radius:8px;overflow:hidden;background:white;border:1px solid #e6edf3;position:relative}
    iframe{width:100%;height:100%;border:0}
    .overlay{position:absolute;inset:0;background:rgba(255,255,255,0.92);display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;text-align:center;gap:12px}
    .btn{padding:8px 12px;border-radius:8px;background:var(--accent);color:white;border:none;cursor:pointer}
    .btn.ghost{background:transparent;color:var(--accent);border:1px solid var(--accent)}
    .small{font-size:13px}
    .tags{margin-top:6px;font-size:12px;color:#64748b}
    .footer{font-size:12px;color:#64748b;margin-top:8px}
    @media(max-width:800px){.sidebar{width:100%;order:2}.wrap{flex-direction:column}.main{order:1}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="sidebar">
      <div class="brand">VINFAST TRƯƠNG THÀNH KIÊN GIANG - LINK HUB</div>
      <div class="search">
        <input id="q" placeholder="Tìm app theo tên hoặc tag..." oninput="filterList()" />
        <button class="btn ghost" onclick="clearSearch()">Clear</button>
      </div>
      <div class="tags small" id="tags">Tất cả</div>
      <div class="list" id="linksList"></div>
      <div class="footer">Ghi chú: nếu trang không hiển thị trong iframe, đó có thể do trang đó chặn embed (X-Frame-Options). Bạn có thể mở trong cùng tab bằng nút trong overlay.</div>
    </div>

    <div class="main">
      <div class="controls">
        <div id="currentTitle" style="font-weight:700">Đang mở app...</div>
        <div style="flex:1"></div>
        <button class="btn" onclick="openInSameTab()">Mở trong tab này</button>
      </div>

      <div class="frameWrap" id="frameWrap">
        <iframe id="viewer" sandbox="allow-scripts allow-forms allow-same-origin"></iframe>

        <!-- overlay for blocked embed -->
        <div class="overlay" id="overlay" style="display:none">
          <div style="font-weight:700">Không thể hiển thị nội dung ở đây</div>
          <div class="small">Trang này có thể chặn việc nhúng (X-Frame-Options or CSP). Bạn có thể mở trang trong cùng tab.</div>
          <div style="display:flex;gap:8px">
            <button class="btn" id="openSameBtn">Mở trong tab này</button>
            <button class="btn ghost" onclick="closeOverlay()">Đóng overlay</button>
          </div>
        </div>
      </div>

      <div style="margin-top:8px;font-size:13px;color:#475569">
        Lưu ý: link mặc định mở trong iframe. Nếu bạn muốn mở trang lớn bấm vào "mở trong tab này" góc phải ở trên màn hình.
      </div>
    </div>
  </div>

<script>
const LINKS = [
  {id:'app0', title:'Báo cáo ngày', url:'https://script.google.com/macros/s/AKfycbysNXY9mB-1cesOKXzfh-r0QLD0xmdbQyxropMK7LJsCzcH6JG4Hg_MolDoIshzrobGSA/exec', desc:'Báo cáo ngày', tag:'Báo cáo ngày'},
  {id:'app1', title:'Dashboard Doanh Số', url:'https://script.google.com/macros/s/AKfycbzgIUo156Jz_nawrRIkeig25Nenk7oOzgjxYOrEuumD0Yqi3CZjw8EY3ml7tKWsB_Eg/exec', desc:'Bảng theo dỏi doanh số', tag:'doanh số'},
  {id:'app2', title:'Thông tin đơn hàng', url:'https://script.google.com/macros/s/AKfycbyTCSHuQWb_BgyVk8QqqkrIlz7J44kanIIX0X6AiRVDXkqQCo9FZKqI_Ltk5BwqPPjM/exec',desc:'Thông tin đơn hàng', tag:'thongtindonhang'},
  {id:'app3', title:'Nhập thoả thuận hổ trợ LS', url:'https://script.google.com/macros/s/AKfycbyGvXnX2FOXvu5LXvgnnmh0pkLGdmTlBJU8jWkrZ0uFecgJD0GTV8nkuc_ehoG4gXMvVA/exec', desc:'Nhập thoả thuận hổ trợ LS', tag:'TTLS'},
  {id:'app4', title:'Kho xe', url:'https://script.google.com/macros/s/AKfycbwAcUcDhf2zngEoKxTgk-cTCtCeZ_X7AeW-n4EaUV5gpuZPa0oFNgKRu7OousX8Dcx4sg/exec?pli=1', desc:'Kho xe yêu cầu đăng nhập', tag:'khoxe'},
  {id:'app5', title:'Tìm xe', url:'https://script.google.com/macros/s/AKfycbzGJ0HtbV_h0GqB95N4gg9u2Jl4hmX6Lt4S40U9DzYGAauMzhAlKVCw_aoALtynG1xl/exec', desc:'Tìm xe trong kho', tag:'timxe'},
  {id:'app6', title:'Chính sách', url:'https://script.google.com/macros/s/AKfycbwTE2s8GZq5N5mjlSN5Uo-l1GdtM0PZX6RDl6SxBI-g-N_h53rzqhxKs2cQceFyu9rO/exec', desc:'Chính sách VinFast', tag:'chinhsach'},
  {id:'app7', title:'Tính lãi vay', url:'https://script.google.com/macros/s/AKfycbwOob8NhBYkgTg0zdBnJCyI6iWWTT0Abh7TQewQn2aixY-povZ10UVv9qGc7dFOG1G1/exec', desc:'Tính lãi vay', tag:'tinhlaivay'},
  
];

let filtered = LINKS.slice();
const listEl = document.getElementById('linksList');
const viewer = document.getElementById('viewer');
const overlay = document.getElementById('overlay');
const currentTitle = document.getElementById('currentTitle');
let currentUrl = null;

function renderList(){
  listEl.innerHTML = '';
  if(filtered.length === 0){
    listEl.innerHTML = '<div style="color:#64748b;padding:8px">Không tìm thấy kết quả</div>';
    return;
  }
  
  filtered.forEach(item=>{
    const it = document.createElement('div');
    it.className = 'item';
    it.innerHTML = `<div class="title">${escapeHtml(item.title)}</div>
                    <div class="desc">${escapeHtml(item.desc || '')}</div>
                    <div class="tags small">${escapeHtml(item.tag || '')}</div>`;
    it.onclick = ()=> openLink(item);
    listEl.appendChild(it);
  });
}

function filterList(){
  const q = (document.getElementById('q').value || '').toLowerCase().trim();
  filtered = LINKS.filter(l=>{
    return l.title.toLowerCase().includes(q) || (l.tag||'').toLowerCase().includes(q) || (l.desc||'').toLowerCase().includes(q);
  });
  document.getElementById('tags').innerText = q ? `Kết quả cho "${q}"` : 'Tất cả';
  renderList();
}

function openLink(item){
  currentUrl = item.url;
  currentTitle.innerText = item.title;
  overlay.style.display = 'none'; // auto đóng overlay
  viewer.src = item.url;
  setTimeout(()=> {
    try {
      const doc = viewer.contentDocument || viewer.contentWindow.document;
      if(!doc || doc.location.href === 'about:blank'){
        showBlockedOverlay(item);
      } else {
        overlay.style.display = 'none';
      }
    } catch(e){
      setTimeout(()=>{
        const r = viewer.getBoundingClientRect();
        if(r.width < 100 || r.height < 50){
          showBlockedOverlay(item);
        } else {
          overlay.style.display = 'none';
        }
      },1200);
    }
  },700);
}

function showBlockedOverlay(item){
  overlay.style.display = 'flex';
  document.getElementById('openSameBtn').onclick = ()=> {
    window.location.href = item.url;
  };
}

function openInSameTab(){
  if(currentUrl) window.location.href = currentUrl;
  else alert('Chưa có app nào được chọn.');
}
function closeOverlay(){ overlay.style.display = 'none'; }
function clearSearch(){ document.getElementById('q').value=''; filterList(); }
function escapeHtml(str){ return (str||'').replace(/[&<>"']/g, m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }

window.addEventListener('DOMContentLoaded',()=>{
  filtered = LINKS.slice();
  renderList();
  // Luôn mở app đầu tiên
  if(LINKS.length > 0){
    openLink(LINKS[0]);
  }
});
</script>
</body>
</html>
tôi muốn nó đẹp hơn nữa với css
